{% extends "base.html" %}

{% block content %}
<script>
    const addClassToTargetOnHover = (selector, className) => {
        const selected = document.querySelectorAll(selector);
        selected.forEach(source => {
            const target = document.querySelector('#' + source.attributes.target.value);
            source.addEventListener('mouseenter', () => {
                target.classList.add(className);
            });
            source.addEventListener('mouseleave', () => {
                target.classList.remove(className);
            });
        });
    };

    window.onload = () => {
        addClassToTargetOnHover('.attack', 'attack-target');
        addClassToTargetOnHover('.transfer', 'transfer-target');
    };

</script>
<form id="board" method="post" action="board">
    <div class="month">{{ context.month }}</div>
    {% for team in context.teams %}
    <div id="{{ team }}">
        <div class="core">
            <div class="triangle">
                {% for entity in context.teams[team].entities %}
                <div class="card" id={{ entity.id }}>
                    {% with context = entity %}
                        {% include 'entity.html' %}
                    {% endwith %}
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
    {% endfor %}
    <input type="submit" value="Finish turn" class="finish-turn-btn">
</form>
{% endblock %}
